# Credit Card Fraud Detection - Production Dependencies
# VERSIONS PINNED AFTER SUCCESSFUL PHASE 3 COMPLETION
# Compatible with Python 3.9+
# Last Updated: 2025-09-15

# CRITICAL: These versions are LOCKED after successful SMOTE-Tomek implementation
# DO NOT UPDATE without full regression testing

# Data Processing & Analysis (PYTHON 3.13 COMPATIBLE VERSIONS)
pandas==2.3.1                    # COMPATIBLE: Python 3.13 + Memory optimization maintained
numpy==1.26.4                    # COMPATIBLE: Python 3.13 + Haversine distance calculations
scipy==1.14.1                    # COMPATIBLE: Python 3.13 + Statistical validation tests

# Machine Learning (PYTHON 3.13 COMPATIBLE VERSIONS)
scikit-learn==1.6.1              # COMPATIBLE: Python 3.13 + Feature importance (VALIDATE BEHAVIOR)
xgboost==2.1.3                   # COMPATIBLE: Python 3.13 + For Phase 4 ensemble methods
lightgbm==4.5.0                  # COMPATIBLE: Python 3.13 + For Phase 4 gradient boosting
imbalanced-learn==0.13.0         # COMPATIBLE: Python 3.13 + SMOTE-Tomek (VALIDATE 172:1 → 1:1)

# Visualization (COMPATIBLE VERSIONS)
matplotlib==3.8.2                # TESTED: EDA visualizations, seaborn compatibility
seaborn==0.13.0                  # TESTED: Statistical plots, heatmaps
plotly==5.17.0                   # TESTED: Interactive visualizations

# Model Interpretation (FOR PHASE 5)
shap==0.44.0                     # STABLE: Feature importance analysis
lime==0.2.0.1                    # BACKUP: Alternative interpretation method

# Feature Engineering (ADDITIONAL TOOLS)
category-encoders==2.6.3        # OPTIONAL: Advanced categorical encoding
feature-engine==1.7.0           # OPTIONAL: Pipeline automation

# Progress & Utilities (TESTED VERSIONS)
tqdm==4.66.1                     # TESTED: Progress bars in notebooks
joblib==1.3.2                    # TESTED: Model serialization, parallel processing

# Development Dependencies
jupyterlab>=4.0.0,<5.0.0
ipywidgets>=8.0.0,<9.0.0
jupyter-dash>=0.4.0,<1.0.0

# Code Quality
black>=23.0.0,<25.0.0
flake8>=6.0.0,<8.0.0
mypy>=1.0.0,<2.0.0

# Testing (STABLE VERSIONS)
pytest==7.4.3                   # STABLE: Unit testing framework
pytest-cov==4.1.0               # STABLE: Coverage reporting

# System Utilities (VALIDATED)
psutil==5.9.6                   # TESTED: Memory usage monitoring

# ==============================================================================
# CRITICAL VERSION LOCKING RATIONALE
# ==============================================================================

# WHY THESE VERSIONS ARE LOCKED:
# 1. imbalanced-learn==0.11.0: SMOTE-Tomek algorithm successfully balanced 172:1 → 1:1
#    - Any version change could alter synthetic sample generation
#    - Risk: Breaking the 1.8M resampled dataset pipeline
#    - Validation Required: Full SMOTE-Tomek regression testing

# 2. scikit-learn==1.3.2: Core ML functionality validated
#    - Feature importance calculations (mutual_info_classif)
#    - train_test_split temporal behavior
#    - Risk: Different algorithms/parameters in newer versions

# 3. pandas==2.1.4: Memory optimization achieved (42.7% reduction)
#    - Categorical dtype handling for 693 merchants, 14 categories
#    - Risk: Memory usage increase, dtype behavior changes

# 4. numpy==1.26.2: Mathematical operations validated
#    - Haversine distance calculations (vectorized)
#    - Risk: Numerical precision differences

# WARNING SIGNS THAT REQUIRE VERSION ROLLBACK:
# - SMOTE-Tomek class balance != 50/50 split
# - Feature importance rankings change dramatically
# - Memory usage increases beyond 20% threshold
# - Temporal splits show data leakage
# - Distance calculations produce different results

# BEFORE UPDATING ANY LOCKED VERSION:
# 1. Create full backup of current working environment
# 2. Run complete regression test suite
# 3. Validate SMOTE-Tomek sampling produces identical results
# 4. Verify feature importance consistency
# 5. Check memory usage impact
# 6. Validate temporal split behavior
# 7. Test on both training and production data

# PRODUCTION DEPLOYMENT:
# Use: pip install -r requirements.txt --no-deps
# This ensures exact version matching without dependency resolution conflicts 